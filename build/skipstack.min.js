!function(){function t(){return["precision mediump float;uniform float time;uniform vec2 resolution;void main( void ){gl_FragColor=vec4( 1.0 );vec2 p=gl_FragCoord.xy / resolution -0.5;vec2 r=vec2(length(p), atan(p.x, p.y));r.y=fract(time+abs(1.0-sin(time)*3.0)*r.y/3.141592653);if(r.x > .22 && r.x < .4 && r.y < 0.9){gl_FragColor.rgb *=vec3(0.0, 0.7, 0.8) / ( smoothstep(0.0, 0.07, dot(r.x,r.x)) * smoothstep(0.3, 0.1, dot(r.x,r.x)) + smoothstep(0.9, 0.92, dot(r.y,r.y)) );}}"]}function e(){console.log("SkipStack version: "+xt.version+"\nGrid Scale: "+Et+", "+jt+"\nGameType: "+it+"\nDifficulty: "+At),ht=dt=[],"Endless"===it&&(tt=0,Z=5),At===Tt[0]?(ot=1e3,St=60):At===Tt[1]?(ot=800,St=65):At===Tt[2]?(ot=600,St=70):At===Tt[3]?(ot=500,St=80):(console.error("Something went terribly wrong! \n Couldnt find the selected difficulty. Setting default seetings."),ot=1e3,St=60),ft=!1,rt=(Ct-(2*_t*Et+2*_t))/Et,st=(Ct-(2*_t*jt+2*_t))/jt}function i(){if(et=new Phaser.Filter(bt,null,t()),et.setResolution(Ct,kt),!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(mt=bt.input.keyboard.createCursorKeys(),mt.left.onDown.add(function(){ct.move("left")},this),mt.right.onDown.add(function(){ct.move("right")},this),mt.down.onDown.add(function(){ct.move("down")},this),mt.up.onDown.add(function(){ct.move("up")},this),wt===!0)){var e=[87,65,68,83],i=["up","left","right","down"];gt=bt.input.keyboard.addKeys(e,i),gt.up.onDown.add(function(){at.move("up")},this),gt.left.onDown.add(function(){at.move("left")},this),gt.right.onDown.add(function(){at.move("right")},this),gt.down.onDown.add(function(){at.move("down")},this)}if(xt.isCountdownEnabled===!0){var o=bt.add.sprite();o.width=Ct,o.height=kt,o.filters=[et];var r=bt.add.text(bt.world.centerX/1.15,bt.world.centerY/1.3,"5",{font:"Bold "+Ct/5+"px Arial",fill:"rgb(0, 179, 204)",align:"center"});setTimeout(function(){r.text="4",setTimeout(function(){r.text="3",setTimeout(function(){r.text="2",setTimeout(function(){r.text="1",setTimeout(function(){r.text="",o.destroy(),console.clear(),console.log("SkipStack version: "+xt.version+"\nGrid Scale: "+Et+", "+jt+"\nGameType: "+it+"\nDifficulty: "+At),xt.isCountdownEnabled=!1},500)},500)},500)},500)},500)}if(nt=new Color,lt=new Grid(Et,jt,rt,st,"#333","#ffffff",2*_t),lt.init(),wt===!0)ct=new Actor("#006400","0-"+Math.floor(jt/2)),at=new Actor("#006400",Et-1+"-"+Math.ceil(jt/2)),ct.init(),at.init();else{if(Wt===!0)ct=new Actor("#006400");else{var s=ct._c;ct=new Actor("#006400",lt.cell[s].HashId)}ct.init()}wt===!1&&c(3+Pt),Mt=bt.time.time+ot,Wt=zt=!1,ut=bt.time.now,$("#gamecont").swipe({swipe:function(t,e,i,o,r,s){ct.move(e)},threshold:0})}function o(){if(xt.isCountdownEnabled===!0)return et.update();var t,e;if(Nt===!0&&et.update(),lt.render(),bt.time.time>Mt){for(t=0;t<ht.length;t++)ht[t].move(dt[t]);xt.soundsOn&&K.play(),ft=!1,Mt=bt.time.time+ot}else if(ft===!1){for(dt=[],e=0;e<ht.length;e++)dt.push(ht[e].Nextmove());ft=!0}if(!wt)if("Normal"===it)0===ht.length&&l();else if("Endless"===it)pt>Z&&(console.log("Adding more enemies!"),.45>tt?(tt+=.05,Z*=1.55-tt,c(1)):(tt+=.5,Z*=1.1,c(Math.round(tt))),ot-=10);else if("SkipSmash"===it)1===ht.length&&l();else if("PaintStack"===it)if(Math.floor(ct.markedArea)>St)l();else if(0===ht.length){for(t=0;t<Math.ceil((Pt+1)/2);t++)e="",e=Gt[0]()===!0?Gt[0]()===!0?"0-"+a(0,jt):a(0,Et)+"-0":Gt[0]()===!0?Et-1+"-"+a(0,jt):a(0,Et)+"-"+(jt-1),"Normal"===lt.cell[lt.getCell(e)].type?ht.push(new Enemy(Bt,e)):t--;for(e=0;e<ht.length;e++)ht[e].init()}$t=Math.round((Mt-bt.time.time)/ot*100),pt=Math.round((bt.time.now-ut)/1e3),T(),s()}function r(){var t=$(".bar");$t%20===0&&t.css("background-color","rgb("+255*(100-$t)/100+", "+255*$t/100+", 0)"),t.css("width",$t+"%")}function s(){bt.debug.text("grid: "+Et+"-"+jt,3,14,"#b1ff00"),bt.debug.text("enemies: "+ht.length,3,27,"#b1ff00"),bt.debug.text("beat rate: "+ot+" ms",3,40,"#b1ff00"),bt.debug.text("Interval: "+$t+" %",3,53,20>$t?"#ff0000":"#00ff27"),bt.debug.text("time: "+pt+" s",3,66,"#b1ff00"),bt.debug.text("Level: "+xt.CurrentScore,3,79,"#b1ff00"),"PaintStack"===it&&bt.debug.text("marked area: "+Math.floor(ct.markedArea)+"%",3,92,"#b1ff00")}function n(){console.clear(),xt.soundsOn&&Q[a(0,Q.length)].play(),Wt=!0,jt=Et=7,ut=bt.time.now,"Normal"===it?xt.TotalScore[0]+=xt.CurrentScore:"SkipSmash"===it?xt.TotalScore[2]+=xt.CurrentScore:"Endless"===it?xt.TotalScore[1]+=xt.CurrentScore:"PaintStack"===it&&(xt.TotalScore[3]+=xt.CurrentScore),xt.CurrentScore=Pt=Dt=0,xt.isCountdownEnabled=!0,bt.state.start(bt.state.current)}function l(){console.clear();var t=Math.ceil(Et+Dt*Et/2);xt.soundsOn&&U[a(0,U.length)].play(),zt=!0,xt.CurrentScore=++Pt,"Normal"===it?(Wt=!0,3+Pt>t&&(Dt++,jt=++Et)):"SkipSmash"===it?(Wt=!0,3+Pt>Math.ceil(Et+Dt*Et/3)&&(Dt++,jt=++Et)):"PaintStack"===it&&(Wt=!0,3+Pt>Math.ceil(Et+Dt*Et/4)&&(jt=++Et)),xt.isCountdownEnabled=!1,bt.state.start(bt.state.current)}function c(t){var e,i="";for(e=0;t>e;e++)i=Gt[0]()===!0?Gt[0]()===!0?"0-"+a(0,jt):a(0,Et)+"-0":Gt[0]()===!0?Et-1+"-"+a(0,jt):a(0,Et)+"-"+(jt-1),"Normal"===lt.cell[lt.getCell(i)].type?ht.push(new Enemy(Bt,i)):e--,ht[ht.length-1].init()}function a(t,e){return Math.floor(Math.random()*(e-t))+t}function h(t,e){var i=$(""),o=new A(t,e);for(o.top--,o.left--;o.top<o.bottom;o.top++)i=d(o.top,o.left,o.right,i);return i}function d(t,e,i,o){for(var r,s,n,l=$(".gamecont");i>e;e++)n=vt*t,s=vt*e,r=$('<div class="cell" id="'+Number(t+1)+"-"+Number(e+1)+'" />'),r.css({left:s,top:n}),l.append(r),o=o.add("#"+Number(t+1)+"-"+Number(e+1));return o}function f(t,e){var i=new A(t,e);for(x=i.top;x<=i.bottom;x++)for(y=i.left;y<=i.right;y++)$(".cell#"+x+"-"+y).css({border:_t+"px solid #bbb",width:vt,height:vt})}function u(){var t,e=$(window).height(),i=$(window).height(),o=Math.floor(i/7),r=Math.floor(e/13);o>r?(t=r,_t=Math.floor(.00781634663*e/2)):(t=o,_t=Math.floor(.00781634663*i/2)),vt=t-1,kt=Ct=7*vt}function p(t){this.bar=$("<div />"),this.barbg=$("<div />"),this.barfg=$("<div />"),this.barfg.css({width:"100%",position:"absolute",height:vt/4,bottom:0-vt/4,left:"0","z-index":129,"border-left":2*_t+"px solid rgb(0, 0, 0)","border-right":2*_t+"px solid rgb(0, 0, 0)","border-bottom":2*_t+"px solid rgb(0, 0, 0)","box-sizing":"border-box"}),this.barbg.css({"background-color":"rgb(255, 255, 255)",width:"100%",position:"absolute",height:vt/4,bottom:0-vt/4,left:"0","z-index":127}),this.bar.addClass("bar"),this.bar.css({"background-color":"rgb(0, 128, 0)",width:"100%",position:"absolute",height:vt/4,bottom:0-vt/4,left:"0","z-index":128}),this.bar.appendTo($(t)),this.barbg.appendTo($(t)),this.barfg.appendTo($(t))}function b(t,e,i){var o=Number(t.split("-")[0]),r=Number(t.split("-")[1]),s=Number(e.split("-")[1])-r,n=Number(e.split("-")[0])-o,l=$("<div />");return l.css({position:"absolute",width:(s+1)*vt,height:(n+1)*vt,top:(o-1)*vt,left:(r-1)*vt}),$(".gamecont").append(l.addClass(i)),$("."+i)}function m(t,e,i,o,r){this.size=t,this.left=e,this.content=i,this.text=o,this.rendered=!1,this.generate=function(){this.rendered=!0,this.tl=S(this.left),this.br=[this.tl[0],this.tl[1]+(this.size-1)],this["class"]="cls_"+this.text,this.flipcard=g(this.tl[0]+"-"+this.tl[1],this.br[0]+"-"+this.br[1],this["class"]),this.area=this.flipcard.children(".back"),this.area.css({"background-color":"#ffffff",border:_t+"px solid #000000","box-sizing":"border-box"}),j(this.text,this.area),this.text=function(t){return void 0!==t&&this.area.children("div").text(t),this.area.children("div").text()},this.refresh=function(){this.rendered&&this.text(r())},this.flip=function(){L(this.flipcard)}}}function g(t,e,i){var o=Y(),r=Y(),s=Y(),n=(Number(t.split("-")[0])-1)*vt,l=(Number(t.split("-")[1])-1)*vt,c=R(t,e,o);c.addClass("front"),c.addClass(i),c.addClass(s),O(c,n,l);var a=b(t,e,r),h=a.css("width"),d=a.css("height");F(a,n,l),a.css("background-color","aqua"),a.addClass("back"),a.addClass(i),a.addClass(s),c.css({top:n,left:l,width:h,height:d});var f=$("<div />");return f.css({position:"absolute",top:n+"px",left:l+"px",width:h,height:d,"z-index":_()}),f.addClass("flipcard "+i),f.attr({"data-tl":t,"data-br":e}),$("."+s).wrapAll(f),$("."+i+" > *").removeClass(o),$("."+i+" > *").removeClass(r),$("."+i+" > *").removeClass(s),$(".flipcard."+i)}function C(t,e){t.children(".front").remove();var i=t.css("top"),o=t.css("left"),r=t.data("tl"),s=t.data("br");return t=t.children(".back"),t.attr({"data-tl":r,"data-br":s}),t.css({top:i,left:o,"z-index":_()}),t.children(".back").removeClass("back"),t.unwrap(),void 0!==e&&(yt=t,e()),t}function k(t,e){var i=$("<div />"),o=$("<div />");i.css({position:"absolute",top:t.css("top"),left:t.css("left"),width:t.css("width"),height:t.css("height"),"z-index":_()}),i.addClass("flipcard "+e),i.attr({"data-tl":t.data("tl"),"data-br":t.data("br"),"data-face":"front"}),t.addClass("front"),t.removeClass("back"),t.css({top:"0",left:"0"}),o.attr("style",t.attr("style")),o.css("backface-visibility","hidden"),o.addClass("back "+e),o.insertAfter(t);$("."+e).wrapAll(i);return $("."+e).not(".back, .front")}function v(t){$.getScript(t,function(){console.log("loaded "+t)})}function _(){return Xt+=1}function w(t,e){return e?t.push(t.shift()):t.unshift(t.pop()),t}function S(t){return[Number(t.split("-")[0]),Number(t.split("-")[1])]}function T(){r(),Ht.refresh()}function A(t,e){this.top=S(t)[0],this.left=S(t)[1],this.bottom=S(e)[0],this.right=S(e)[1]}function N(){f("1-1","13-7"),$(".gamecont").css({border:_t+"px solid #bbb",width:7*vt,height:13*vt})}function M(t){it=qt[0],Ht="PaintStack"===it?new m(2,"2-1","enemies","en",function(){return Math.floor(ct.markedArea)+"%"}):"Endless"===it?new m(2,"2-1","enemies","en",function(){return Math.round(pt)+" s"}):new m(2,"2-1","enemies","en",function(){return xt.CurrentScore});var r=I("4-1","10-7","SkipStack",[".preview",".prev",".next",".modeselector"]);r.children(".back").attr("id","SkipStack"),bt=new Phaser.Game(Ct,kt,Phaser.AUTO,"SkipStack",{preload:e,create:i,update:o,maxWidth:7*vt,maxHeight:7*vt});p("#SkipStack");return"PaintStack"===qt[0]&&(Ht.refresh=function(){Ht.rendered&&this.text(Math.floor(ct.markedArea)+"%")}),Ht.generate(),L(r.not(".SkipStack>*")),setTimeout(function(){C(r)},500),setTimeout(function(){Ht.flip()},300),void 0!==t&&t(),r}function E(t,e){var i=$("<div />");return i.css({width:t*vt+"px","text-align":"center","font-size":.8*vt+"px",position:"fixed",top:"50%",transform:"translateY(-50%)"}),i.text(e),i}function j(t,e){var i,o;e.hasClass("back")?(i=e.parent().data("tl"),o=e.parent().data("br")):(i=e.data("tl"),o=e.data("br"));var r=Number(o.split("-")[1])-Number(i.split("-")[1])+1,s=E(r,t);return s.appendTo(e),e}function B(){var t=g("10-1","10-1","prev"),e=g("10-7","10-7","next");t.children(".back").css({"box-sizing":"border-box","background-color":"#ffffff",border:_t+"px solid rgb(0, 0, 0)"}).click(function(){G()}),e.children(".back").css({"box-sizing":"border-box","background-color":"#ffffff",border:_t+"px solid rgb(0, 0, 0)"}).click(function(){D()});var i=g("10-2","10-6","modeselector"),o=g("4-2","7-6","preview");i.children(".back").css({"box-sizing":"border-box","background-color":"#ffffff",border:_t+"px solid rgb(0, 0, 0)"}),j("Normal",i.children(".back")),o.children(".back").css({"box-sizing":"border-box","background-color":"#ffffff",border:_t+"px solid rgb(0, 0, 0)"}),j("[Normal preview]",o.children(".back")),setTimeout(function(){t=L(t)},100),setTimeout(function(){o=L(o)},200),setTimeout(function(){e=L(e)},100),i=L(i),setTimeout(function(){i=C(i,W),o=C(o,P),e=C(e),t=C(t)},1e3)}function P(){yt=k(yt,"preview"),j("disp",yt.children(".back")),yt.click(function(){M()})}function W(){yt=k(yt,"modeselector"),j("disp",yt.children(".back")),yt.click(function(){M()})}function z(t,e,i){"front"==t.data("face")?(t.data("face","back"),t.children(".back > div").text(e)):(t.data("face","front"),t.children(".front > div").text(e)),L(t.not(".flipcard > *"),i)}function D(){w(qt,!0),setTimeout(function(){z($(".preview"),"["+qt[0]+" preview]")},50),z($(".modeselector"),qt[0])}function G(){w(qt),setTimeout(function(){z($(".preview"),"["+qt[0]+" preview]",!0)},50),z($(".modeselector"),qt[0],!0)}function X(t){var e=t.split("-")[0],i=t.split("-")[1];return $("#"+e+"-"+i)}function q(t,e,i,o){for(;e+1>=t;t++)o=o.add(X(i+"-"+t));return o}function H(t,e){for(var i=$(""),o=Number(t.split("-")[0]),r=Number(t.split("-")[1]),s=Number(e.split("-")[0]),n=Number(e.split("-")[1])-1;s>=o;o++)i=q(r,n,o,i);return i}function R(t,e,i){return H(t,e).wrapAll('<div class="'+i+'"/>'),$("."+i)}function L(t,e,i){t.css("z-index",_()),void 0===t.data("rotation")&&t.data("rotation",0);var o,r=t.data("rotation");return e?(o=180*Number(r)-180,r--):(o=180*Number(r)+180,r++),t.transition({perspective:"800px",rotateY:o+"deg"}),t.data("rotation",r),void 0!==i&&i(t,i),t}function Y(){for(var t="",e="abcdefghijklmnopqrstuvwxyz",i=0;5>i;i++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}function O(t,e,i){return t.children(".cell").each(function(){$(this).css("top",Number($(this).css("top").split("px")[0])-e+"px"),$(this).css("left",Number($(this).css("left").split("px")[0])-i+"px")}),t}function F(t,e,i){return t.css({top:Number($(t).css("top").split("px")[0])-e+"px",left:Number($(t).css("left").split("px")[0])-i+"px"}),t}function I(t,e,i,o){var r=g(t,e,i),s=$(r.children(".front")),n=S(t);return o.forEach(function(t){F($(t),Number(n[0]-1)*vt,Number(n[1]-1)*vt),s=s.append($(t))}),s.appendTo($("."+i+".front")),r}var K=jsfxlib.createWave(["sine",0,.4,0,.092,0,.208,20,286,2400,-.674,0,0,.01,3e-4,0,0,0,0,0,0,0,0,1,0,0,.048,0]),V=[jsfxlib.createWave(["square",0,.4,0,.028,0,.118,20,525,2400,-.658,0,0,.01,3e-4,0,0,0,.2415,0,0,0,0,1,0,0,.227,0]),jsfxlib.createWave(["square",0,.4,0,.062,0,.284,20,762,2400,-.374,0,0,.01,3e-4,0,0,0,.5,0,0,0,0,1,0,0,.017,0])],U=[jsfxlib.createWave(["square",0,.4,.672,1.424,.351,1.526,636,2166,1208,-.268,.08,.132,35.9545,.6126,-.024,-.948,.757,.0435,.586,.3992,-.974,-.434,.802,-.156,.526,.792,.572]),jsfxlib.createWave(["square",0,.4,.242,1.174,2.097,.946,1529,139,1995,-.206,.884,.769,3.7532,.6438,-.966,-.786,.419,.383,.482,.1912,-.904,-.082,.624,-.568,.015,.345,.26]),jsfxlib.createWave(["synth",0,.4,.082,1.742,2.637,.658,1661,2057,69,.886,.402,.188,17.6703,.9337,.38,-.09,.222,.1315,-.774,.1648,-.16,-.408,.439,-.358,.884,.906,-.1])],J=jsfxlib.createWave(["sine",0,.4,0,.244,.048,.116,20,507,2400,-.728,0,0,.01,3e-4,0,0,0,.495,.032,0,0,0,1,0,0,0,0]),Q=[jsfxlib.createWave(["square",12,.923,.977,.366,2.139,1.888,137,992,2262,.746,-.918,.001,13.9751,.6581,-.89,.834,.284,.329,-.442,.524,-.542,.638,.214,.952,.974,.794,.802]),jsfxlib.createWave(["square",12,.923,.706,1.82,.933,.534,1837,557,437,.338,-.692,.353,4.761,.8375,.952,.464,.782,.1985,-.084,.0096,-.17,.014,.091,.312,.71,.178,.396]),jsfxlib.createWave(["square",12,.923,.967,1.424,1.212,.438,1982,1391,921,.37,.072,.811,39.1219,.3032,-.802,-.544,.413,.3375,-.468,.0232,.334,.648,.8,-.944,.661,.778,.04]),jsfxlib.createWave(["square",0,1,.063,.922,1.113,1.144,962,357,1708,-.194,-.688,.097,39.9857,.9779,-.05,-.692,.579,.323,.33,.3264,-.226,-.596,.764,-.628,.8,.953,.564])];Actor=function(t,e){this.color=t,"undefined"==typeof e?this.block=Math.floor(Et/2)+"-"+Math.floor(Et/2):this.block=e,this._c=0,this.enemiesKilled=0,this.markedArea=0},Actor.prototype={init:function(){this._c=lt.getCell(this.block),lt.cell[this._c].setColor(this.color),lt.cell[this._c].setCellType("Actor")},move:function(t){if(xt.isCountdownEnabled===!0)return console.log("Can't move while game is loading!");if("SkipSmash"!==it)switch(t){case"up":this.makeMove(t,this._c-Et);break;case"down":this.makeMove(t,this._c+Et);break;case"left":this.makeMove(t,this._c-1);break;case"right":this.makeMove(t,this._c+1)}else switch(t){case"up":this.thrustEnemy(t,this._c-Et);break;case"down":this.thrustEnemy(t,this._c+Et);break;case"left":this.thrustEnemy(t,this._c-1);break;case"right":this.thrustEnemy(t,this._c+1)}},makeMove:function(t,e){if(lt.cell[this._c].checkCell(t,this._c));else if(xt.hasBounds===!1)switch(t){case"up":e=this._c+Et*jt-Et;break;case"down":e=this._c-Et*jt+Et;break;case"left":e=this._c+Et-1;break;case"right":e=this._c-Et+1}if("Enemy"===lt.cell[e].type)for(var i=0;i<ht.length;i++)if(ht[i]._c===e){0!=ht.length&&xt.soundsOn&&V[a(0,V.length)].play(),ht.splice(i,1),dt.splice(i,1);break}lt.cell[this._c].setCellType("Normal"),"PaintStack"!==it?(lt.cell[this._c].setColor(lt.c2),this._c=e,lt.cell[this._c].setColor(this.color),lt.cell[this._c].setCellType("Actor")):(lt.cell[this._c].isMarked?lt.cell[this._c].setColor(lt.cell[this._c].genColor):lt.cell[this._c].setColor(lt.c2),this._c=e,lt.cell[this._c].isMarked||(this.markedArea+=1/(Et*jt)*100,lt.cell[this._c].genColor=nt.genetaHSLColor_Angle([{minAngle:320,maxAngle:359},{minAngle:0,maxAngle:40},{minAngle:70,maxAngle:160}]),lt.cell[this._c].isMarked=!0),lt.cell[this._c].setColor(this.color),lt.cell[this._c].setCellType("Actor"))},thrustEnemy:function(t,e){if(lt.cell[this._c].checkCell(t,this._c))if("Enemy"===lt.cell[e].type){for(var i=0;i<ht.length;i++)if(ht[i]._c===e){0!=ht.length&&xt.soundsOn&&J.play(),ht[i].Thrust(t);break}lt.cell[e].checkCell(t,e)&&(lt.cell[this._c].setCellType("Normal"),lt.cell[this._c].setColor(lt.c2),this._c=e,lt.cell[this._c].setColor(this.color),lt.cell[this._c].setCellType("Actor"))}else lt.cell[this._c].setCellType("Normal"),lt.cell[this._c].setColor(lt.c2),this._c=e,lt.cell[this._c].setColor(this.color),lt.cell[this._c].setCellType("Actor")}},Actor.prototype.constructor=Actor,Cell=function(t,e,i,o){this.color=o,this.positionX=t,this.positionY=e,this.HashId=i,this.rect,this.init(),this.type="Normal",this.isMarked=!1,this.isFilterEnabled=!1,this.genColor="#000"},Cell.prototype={init:function(){this.rect=new Phaser.Rectangle(this.positionX,this.positionY,lt.cellWidth,lt.cellWidth)},setCellType:function(t){"Normal"!=t&&"Enemy"!=t&&"Actor"!=t&&alert('type can only be "Enemy","Normal","Actor"'),this.type=t},render:function(){this.isFilterEnabled===!1&&bt.debug.geom(this.rect,this.color)},setColor:function(t){this.color=t},EnableFilter:function(){this.isFilterEnabled=!0,this.rect=bt.add.sprite(this.positionX,this.positionY),this.rect.width=rt,this.rect.height=st,this.rect.filters=[et]},checkCell:function(t,e){var i,o=!0;switch(t){case"up":o=Et>e?!1:!0;break;case"down":o=e>=Et*jt-Et?!1:!0;break;case"left":for(i=0;Et>i;i++)e===Et*i&&(o=!1);if(o===!1)break;o=!0;break;case"right":for(i=1;Et>=i;i++)e===Et*i-1&&(o=!1);if(o===!1)break;o=!0}return o}},Cell.prototype.constructor=Cell,Color=function(){this.Color_OceanBlue=10092543,this.Color_SteelBlue=4620980,this.Color_RoyalBlue=4286945,this.Color_Aquamarine=8388564,this.Color_Blue=255,this.Color_BlueViolet=9055202,this.Color_CadetBlue=6266528,this.Color_CornflowerBlue=6591981,this.Color_Cyan=65535,this.Color_DarkBlue=139,this.Color_DarkCyan=35723,this.Color_DodgerBlue=2003199,this.Color_DeepSkyBlue=49151,this.Color_LightSteelBlue=11584734,this.Color_Navy=128,this.Color_PowderBlue=11591910,this.Color_Turquoise=4251856,this.Color_Black=0,this.Color_Violet=15631086,this.Color_Yellow=16776960,this.Color_Tomato=16737095,this.Color_PaleVioletRed=14381203,this.Color_Red=16711680,this.Color_Wheat=16113331,this.Color_AntiqueWhite=16444375,this.Color_White=16777215},Color.prototype={generateHexColor:function(){return"#"+(16777215*(.5+.5*Math.random())<<0).toString(16)},genetaRGBAColor:function(){return"rgba("+a(0,256)+","+a(0,256)+","+a(0,256)+","+Math.random()+")"},genetaRGBColor_max:function(t,e,i){for(var o=[a(0,256),a(0,256),a(0,256)];o[0]>t;)o[0]/=2;for(;o[1]>t;)o[1]/=2;for(;o[2]>t;)o[2]/=2;return"rgba("+Math.round(o[0])+","+Math.round(o[1])+","+Math.round(o[2])+", 1)"},genetaRGBColor:function(){return"rgba("+a(0,256)+","+a(0,256)+","+a(0,256)+", 1)"},genetaHSLColor:function(){return"hsl("+a(0,360)+",30%,30%)"},genetaHSLColor_Angle:function(t){for(var e=0,i=a(0,360);e<t.length;)i>=t[e].minAngle&&i<=t[e].maxAngle&&(i=a(0,360),e=-1),e++;return"hsl("+i+","+a(30,61)+"%,30%)"},genetaHSLAColor:function(){return"hsl("+a(0,360)+",30%,30%,"+Math.random()+")"}},Color.prototype.constructor=Color,Enemy=function(t,e){this.color=t,"undefined"==typeof e?alert('Error : "blockID" is undefined'):this.block=e,this.isDead=!1,this._c=0,lt.cell[lt.getCell(this.block)].type="Enemy"},Enemy.prototype={init:function(){this._c=lt.getCell(this.block),lt.cell[this._c].setColor(this.color),lt.cell[this._c].setCellType("Enemy")},move:function(t){var e=0;switch(t){case"up":lt.cell[this._c].checkCell(t,this._c)&&"Enemy"!==lt.cell[this._c-Et].type&&(e=this._c-Et);break;case"down":lt.cell[this._c].checkCell(t,this._c)&&"Enemy"!==lt.cell[this._c+Et].type&&(e=this._c+Et);break;case"left":lt.cell[this._c].checkCell(t,this._c)&&"Enemy"!==lt.cell[this._c-1].type&&(e=this._c-1);break;case"right":lt.cell[this._c].checkCell(t,this._c)&&"Enemy"!==lt.cell[this._c+1].type&&(e=this._c+1)}e&&(lt.cell[this._c].setCellType("Normal"),lt.cell[this._c].setColor(lt.c2),this._c=e,"PaintStack"===it&&lt.cell[this._c].isMarked&&(ct.markedArea-=1/(Et*jt)*100,lt.cell[this._c].isMarked=!1),lt.cell[this._c].setColor(this.color),lt.cell[this._c].setCellType("Enemy"))},Nextmove:function(){var t=ct._c-this._c,e=Math.round(lt.getRow(ct._c)-lt.getRow(this._c)),i=Math.round(lt.getColumn(ct._c)-lt.getColumn(this._c));return t?e>0&&Gt[0]()?"down":0>e&&Gt[0]()?"up":i>0?"right":"left":n()},Thrust:function(t){var e,i,o;switch(t){case"up":for(e=this._c-Et,i=0;Et>i&&(e=this._c-Et,lt.cell[this._c].checkCell(t,this._c));i++){if("Enemy"===lt.cell[e].type)for(o=0;o<ht.length;o++)if(ht[o]._c===e){lt.cell[e].type="Normal",ht.splice(o,1),dt.splice(o,1);break}this.move(t)}break;case"down":for(e=this._c+Et,i=0;Et>i&&(e=this._c+Et,lt.cell[this._c].checkCell(t,this._c));i++){if("Enemy"===lt.cell[e].type)for(o=0;o<ht.length;o++)if(ht[o]._c===e){lt.cell[e].type="Normal",ht.splice(o,1),dt.splice(o,1);break}this.move(t)}break;case"left":for(e=this._c-1,i=0;Et>i&&(e=this._c-1,lt.cell[this._c].checkCell(t,this._c));i++){if("Enemy"===lt.cell[e].type)for(o=0;o<ht.length;o++)if(ht[o]._c===e){lt.cell[e].type="Normal",ht.splice(o,1),dt.splice(o,1);break}this.move(t)}break;case"right":for(e=this._c+1,i=0;Et>i&&(e=this._c+1,lt.cell[this._c].checkCell(t,this._c));i++){if("Enemy"===lt.cell[e].type)for(o=0;o<ht.length;o++)if(ht[o]._c===e){lt.cell[e].type="Normal",ht.splice(o,1),dt.splice(o,1);break}this.move(t)}}}},Enemy.prototype.constructor=Enemy,Grid=function(t,e,i,o,r,s,n){this.c=r,this.c2=s,"undefined"==typeof n?this.borderThickness=2:this.borderThickness=n,this.cellsCountX=t,this.cellsCountY=e,this.cellWidth=i,this.cellHeight=o,this.grid,this.cell=[]},Grid.prototype={init:function(){var t=this.cellsCountX*this.cellWidth+this.borderThickness*this.cellsCountX+this.borderThickness,e=this.cellsCountY*this.cellHeight+this.borderThickness*this.cellsCountY+this.borderThickness;this.grid=new Phaser.Rectangle((Ct-t)/2,(kt-e)/2,t,e),e=(kt-e)/2,t=(Ct-t)/2;for(var i=0;i<this.cellsCountY;i++)for(var o=0;o<this.cellsCountX;o++){var r=t+this.borderThickness*(o+1)+this.cellWidth*o,s=e+this.borderThickness*(i+1)+this.cellHeight*i;this.cell.push(new Cell(r,s,o.toString()+"-"+i.toString(),this.c2))}},getCell:function(t){for(var e=0;e<this.cell.length;e++)if(this.cell[e].HashId==t)return e;return console.log("Couldn't find the cell with id = "+t),-1},render:function(){for(var t=0;t<this.cell.length;t++)this.cell[t].render()},getRow:function(t){for(var e=this.cellsCountX,i=0;i<this.cellsCountX;i++){if(e>t)return i;e+=this.cellsCountX}console.error("Something went terribly wrong! \n Couldn't find the row of a cell.")},getColumn:function(t){for(var e=0;e<this.cellsCountX;e++)for(var i=0;i<this.cellsCountX;i++)if(t===e+i*this.cellsCountX)return e;console.error("Something went terribly wrong! \n Couldn't find the column of a cell.")}},Grid.prototype.constructor=Grid;var Z,tt,et,it,ot,rt,st,nt,lt,ct,at,ht,dt,ft,ut,pt,bt,mt,gt,Ct,kt,vt,_t,yt,wt=!1,xt=xt||{version:"0.0.1",renderer:["Phaser.WebGL","GLSL"],soundsOn:!1,TotalScore:[0,0,0,0],CurrentScore:0,isPaused:!0,isCountdownEnabled:!0,hasBounds:!1},St=60,Tt=["Easy","Normal","Hard","Insane"],At=Tt[0],Nt=!1,$t=0,Mt=0,Et=7,jt=7,Bt="#b50000",Pt=0,Wt=!0,zt=!1,Dt=0,Gt=[function(){return Math.random()<.5},function(){return!(Math.random()+.5|0)},function(){return!(+new Date%2)}],Xt=0,qt=["Normal","Endless","SkipSmash","PaintStack"];$(document).ready(function(){u(),h("1-1","13-7"),N(),$("#using_builder").length<=0&&(console.log("Loading Scripts"),v("src/Math.js"),v("src/Cell.js"),v("src/Swipe.js"),v("src/Actor.js"),v("src/Enemy.js"),v("src/Assets/Tunes.js"),v("src/Assets/Shaders.js"),v("src/Grid.js"),v("src/Color.js"),v("src/index.js"),console.log("Loaded Scripts")),B()});var Ht}();
//# sourceMappingURL=skipstack.min.js.map
