!function(){function t(){return["precision mediump float;uniform float time;uniform vec2 resolution;void main( void ){gl_FragColor=vec4( 1.0 );vec2 p=gl_FragCoord.xy / resolution -0.5;vec2 r=vec2(length(p), atan(p.x, p.y));r.y=fract(time+abs(1.0-sin(time)*3.0)*r.y/3.141592653);if(r.x > .22 && r.x < .4 && r.y < 0.9){gl_FragColor.rgb *=vec3(0.0, 0.7, 0.8) / ( smoothstep(0.0, 0.07, dot(r.x,r.x)) * smoothstep(0.3, 0.1, dot(r.x,r.x)) + smoothstep(0.9, 0.92, dot(r.y,r.y)) );}}"]}function e(){console.log("Preload Function"),rt=st=[],lt=!1,Q=(ut-(2*bt*wt+2*bt))/wt,Z=(ut-(2*bt*xt+2*bt))/xt}function i(){if(console.log("Create Function"),U=new Phaser.Filter(at,null,t()),U.setResolution(ut,ft),!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(ht=at.input.keyboard.createCursorKeys(),ht.left.onDown.add(function(){it.move("left")},this),ht.right.onDown.add(function(){it.move("right")},this),ht.down.onDown.add(function(){it.move("down")},this),ht.up.onDown.add(function(){it.move("up")},this),gt===!0)){var e=[87,65,68,83],i=["up","left","right","down"];dt=at.input.keyboard.addKeys(e,i),dt.up.onDown.add(function(){ot.move("up")},this),dt.left.onDown.add(function(){ot.move("left")},this),dt.right.onDown.add(function(){ot.move("right")},this),dt.down.onDown.add(function(){ot.move("down")},this)}if(Ct.isCountdownEnabled===!0){var o=at.add.sprite();o.width=ut,o.height=ft,o.filters=[U];var r=at.add.text(at.world.centerX/1.15,at.world.centerY/1.3,"5",{font:"Bold "+ut/5+"px Arial",fill:"rgb(0, 179, 204)",align:"center"});setTimeout(function(){r.text="4",setTimeout(function(){r.text="3",setTimeout(function(){r.text="2",setTimeout(function(){r.text="1",setTimeout(function(){r.text="",o.destroy(),Ct.isCountdownEnabled=!1},1e3)},1e3)},1e3)},1e3)},1e3)}if(tt=new Color,et=new Grid(wt,xt,Q,Z,"#333","#ffffff",2*bt),et.init(),gt===!0)it=new Actor("#006400","0-"+Math.floor(xt/2)),ot=new Actor("#006400",wt-1+"-"+Math.ceil(xt/2)),it.init(),ot.init();else{if(Mt===!0)it=new Actor("#006400");else{var s=it._c;it=new Actor("#006400",et.cell[s].HashId)}it.init()}if(gt===!1){var l,c="";for(l=0;3+Tt>l;l++)c=$t[0]()===!0?$t[0]()===!0?"0-"+n(0,xt):n(0,wt)+"-0":$t[0]()===!0?wt-1+"-"+n(0,xt):n(0,wt)+"-"+(xt-1),"Normal"===et.cell[et.getCell(c)].type?rt.push(new Enemy(St,c)):l--;for(c=0;c<rt.length;c++)rt[c].init()}yt=at.time.time+kt,Mt=Nt=!1,nt=at.time.now,$("#gamecont").swipe({swipe:function(t,e,i,o,r,s){it.move(e)},threshold:0})}function o(){if(Ct.isCountdownEnabled===!0)return U.update();var t,e;if(_t===!0&&U.update(),et.render(),at.time.time>yt){for(t=0;t<rt.length;t++)rt[t].move(st[t]);Ct.soundsOn&&L.play(),lt=!1,yt=at.time.time+kt}else if(lt===!1){for(st=[],e=0;e<rt.length;e++)st.push(rt[e].Nextmove());lt=!0}if(!gt)if("Normal"===J||"Endless"===J)0===rt.length&&l();else if("SkipSmash"===J)1===rt.length&&l();else if("PaintStack"===J)if(Math.floor(it.markedArea)>70)l();else if(0===rt.length){for(t=0;t<Math.ceil((Tt+1)/2);t++)e="",e=$t[0]()===!0?$t[0]()===!0?"0-"+n(0,xt):n(0,wt)+"-0":$t[0]()===!0?wt-1+"-"+n(0,xt):n(0,wt)+"-"+(xt-1),"Normal"===et.cell[et.getCell(e)].type?rt.push(new Enemy(St,e)):t--;for(e=0;e<rt.length;e++)rt[e].init()}vt=Math.round((yt-at.time.time)/kt*100),ct=Math.round((at.time.now-nt)/1e3),w()}function r(){var t=$(".bar");vt%20===0&&t.css("background-color","rgb("+255*(100-vt)/100+", "+255*vt/100+", 0)"),t.css("width",vt+"%")}function s(){console.clear(),Mt=!0,xt=wt=7,nt=at.time.now,"Normal"===J?Ct.TotalScore[0]+=Ct.CurrentScore:"SkipSmash"===J?Ct.TotalScore[2]+=Ct.CurrentScore:"Endless"===J?Ct.TotalScore[1]+=Ct.CurrentScore:"PaintStack"===J&&(Ct.TotalScore[3]+=Ct.CurrentScore),Ct.CurrentScore=Tt=At=0,Ct.isCountdownEnabled=!0,at.state.start(at.state.current)}function l(){var t=Math.ceil(wt+At*wt/2);Ct.soundsOn&&K[n(0,K.length)].play(),Nt=!0,Ct.CurrentScore=++Tt,"Normal"===J?(Mt=!0,3+Tt>t&&(At++,xt=++wt)):"SkipSmash"===J?(Mt=!0,3+Tt>Math.ceil(wt+At*wt/3)&&(At++,xt=++wt)):"Endless"===J?3+Tt>t&&(xt=wt+=2,Mt=!0):"PaintStack"===J&&(Mt=!0,3+Tt>Math.ceil(wt+At*wt/4)&&(xt=++wt)),Ct.isCountdownEnabled=!1,at.state.start(at.state.current)}function n(t,e){return Math.floor(Math.random()*(e-t))+t}function c(t,e){var i=$(""),o=new S(t,e);for(o.top--,o.left--;o.top<o.bottom;o.top++)i=a(o.top,o.left,o.right,i);return i}function a(t,e,i,o){for(var r,s,l,n=$(".gamecont");i>e;e++)l=pt*t,s=pt*e,r=$('<div class="cell" id="'+Number(t+1)+"-"+Number(e+1)+'" />'),r.css({left:s,top:l}),n.append(r),o=o.add("#"+Number(t+1)+"-"+Number(e+1));return o}function h(t,e){var i=new S(t,e);for(x=i.top;x<=i.bottom;x++)for(y=i.left;y<=i.right;y++)$(".cell#"+x+"-"+y).css({border:bt+"px solid #bbb",width:pt,height:pt})}function d(){var t,e=$(window).height(),i=$(window).height(),o=Math.floor(i/7),r=Math.floor(e/13);o>r?(t=r,bt=Math.floor(.00781634663*e/2)):(t=o,bt=Math.floor(.00781634663*i/2)),pt=t-1,ft=ut=7*pt}function u(t){this.bar=$("<div />"),this.barbg=$("<div />"),this.barfg=$("<div />"),this.barfg.css({width:"100%",position:"absolute",height:pt/4,bottom:0-pt/4,left:"0","z-index":129,"border-left":2*bt+"px solid rgb(0, 0, 0)","border-right":2*bt+"px solid rgb(0, 0, 0)","border-bottom":2*bt+"px solid rgb(0, 0, 0)","box-sizing":"border-box"}),this.barbg.css({"background-color":"rgb(255, 255, 255)",width:"100%",position:"absolute",height:pt/4,bottom:0-pt/4,left:"0","z-index":127}),this.bar.addClass("bar"),this.bar.css({"background-color":"rgb(0, 128, 0)",width:"100%",position:"absolute",height:pt/4,bottom:0-pt/4,left:"0","z-index":128}),this.bar.appendTo($(t)),this.barbg.appendTo($(t)),this.barfg.appendTo($(t))}function f(t,e,i){var o=Number(t.split("-")[0]),r=Number(t.split("-")[1]),s=Number(e.split("-")[1])-r,l=Number(e.split("-")[0])-o,n=$("<div />");return n.css({position:"absolute",width:(s+1)*pt,height:(l+1)*pt,top:(o-1)*pt,left:(r-1)*pt}),$(".gamecont").append(n.addClass(i)),$("."+i)}function p(t,e,i,o,r){this.size=t,this.left=e,this.content=i,this.text=o,this.rendered=!1,this.generate=function(){this.rendered=!0,this.tl=v(this.left),this.br=[this.tl[0],this.tl[1]+(this.size-1)],this["class"]="cls_"+this.text,this.flipcard=b(this.tl[0]+"-"+this.tl[1],this.br[0]+"-"+this.br[1],this["class"]),this.area=this.flipcard.children(".back"),this.area.css({"background-color":"#ffffff",border:bt+"px solid #000000","box-sizing":"border-box"}),A(this.text,this.area),this.text=function(t){return void 0!==t&&this.area.children("div").text(t),this.area.children("div").text()},this.refresh=function(){this.rendered&&this.text(r())},this.flip=function(){Y(this.flipcard)}}}function b(t,e,i){var o=F(),r=F(),s=F(),l=(Number(t.split("-")[0])-1)*pt,n=(Number(t.split("-")[1])-1)*pt,c=R(t,e,o);c.addClass("front"),c.addClass(i),c.addClass(s),G(c,l,n);var a=f(t,e,r),h=a.css("width"),d=a.css("height");q(a,l,n),a.css("background-color","aqua"),a.addClass("back"),a.addClass(i),a.addClass(s),c.css({top:l,left:n,width:h,height:d});var u=$("<div />");return u.css({position:"absolute",top:l+"px",left:n+"px",width:h,height:d,"z-index":_()}),u.addClass("flipcard "+i),u.attr({"data-tl":t,"data-br":e}),$("."+s).wrapAll(u),$("."+i+" > *").removeClass(o),$("."+i+" > *").removeClass(r),$("."+i+" > *").removeClass(s),$(".flipcard."+i)}function m(t,e){t.children(".front").remove();var i=t.css("top"),o=t.css("left"),r=t.data("tl"),s=t.data("br");return t=t.children(".back"),t.attr({"data-tl":r,"data-br":s}),t.css({top:i,left:o,"z-index":_()}),t.children(".back").removeClass("back"),t.unwrap(),void 0!==e&&(mt=t,e()),t}function g(t,e){var i=$("<div />"),o=$("<div />");i.css({position:"absolute",top:t.css("top"),left:t.css("left"),width:t.css("width"),height:t.css("height"),"z-index":_()}),i.addClass("flipcard "+e),i.attr({"data-tl":t.data("tl"),"data-br":t.data("br"),"data-face":"front"}),t.addClass("front"),t.removeClass("back"),t.css({top:"0",left:"0"}),o.attr("style",t.attr("style")),o.css("backface-visibility","hidden"),o.addClass("back "+e),o.insertAfter(t);$("."+e).wrapAll(i);return $("."+e).not(".back, .front")}function C(t){$.getScript(t,function(){console.log("loaded "+t)})}function _(){return Et+=1}function k(t,e){return e?t.push(t.shift()):t.unshift(t.pop()),t}function v(t){return[Number(t.split("-")[0]),Number(t.split("-")[1])]}function w(){r(),Bt.refresh()}function S(t,e){this.top=v(t)[0],this.left=v(t)[1],this.bottom=v(e)[0],this.right=v(e)[1]}function T(){h("1-1","13-7"),$(".gamecont").css({border:bt+"px solid #bbb",width:7*pt,height:13*pt})}function M(t){J=Pt[0],Bt="PaintStack"===Pt[0]?new p(2,"2-1","enemies","en",function(){return Math.floor(it.markedArea)+"%"}):new p(2,"2-1","enemies","en",function(){return Ct.CurrentScore});var r=O("4-1","10-7","SkipStack",[".preview",".prev",".next",".modeselector"]);r.children(".back").attr("id","SkipStack"),at=new Phaser.Game(ut,ft,Phaser.AUTO,"SkipStack",{preload:e,create:i,update:o,maxWidth:7*pt,maxHeight:7*pt});u("#SkipStack");return"PaintStack"===Pt[0]&&(Bt.refresh=function(){Bt.rendered&&this.text(Math.floor(it.markedArea)+"%")}),Bt.generate(),Y(r.not(".SkipStack>*")),setTimeout(function(){m(r)},500),setTimeout(function(){Bt.flip()},300),void 0!==t&&t(),r}function N(t,e){var i=$("<div />");return i.css({width:t*pt+"px","text-align":"center","font-size":.8*pt+"px",position:"fixed",top:"50%",transform:"translateY(-50%)"}),i.text(e),i}function A(t,e){var i,o;e.hasClass("back")?(i=e.parent().data("tl"),o=e.parent().data("br")):(i=e.data("tl"),o=e.data("br"));var r=Number(o.split("-")[1])-Number(i.split("-")[1])+1,s=N(r,t);return s.appendTo(e),e}function E(){var t=b("10-1","10-1","prev"),e=b("10-7","10-7","next");t.children(".back").css({"box-sizing":"border-box","background-color":"#ffffff",border:bt+"px solid rgb(0, 0, 0)"}).click(function(){W()}),e.children(".back").css({"box-sizing":"border-box","background-color":"#ffffff",border:bt+"px solid rgb(0, 0, 0)"}).click(function(){z()});var i=b("10-2","10-6","modeselector"),o=b("4-2","7-6","preview");i.children(".back").css({"box-sizing":"border-box","background-color":"#ffffff",border:bt+"px solid rgb(0, 0, 0)"}),A("Normal",i.children(".back")),o.children(".back").css({"box-sizing":"border-box","background-color":"#ffffff",border:bt+"px solid rgb(0, 0, 0)"}),A("[Normal preview]",o.children(".back")),setTimeout(function(){t=Y(t)},100),setTimeout(function(){o=Y(o)},200),setTimeout(function(){e=Y(e)},100),i=Y(i),setTimeout(function(){i=m(i,B),o=m(o,P),e=m(e),t=m(t)},1e3)}function P(){mt=g(mt,"preview"),A("disp",mt.children(".back")),mt.click(function(){M()})}function B(){mt=g(mt,"modeselector"),A("disp",mt.children(".back")),mt.click(function(){M()})}function j(t,e,i){"front"==t.data("face")?(t.data("face","back"),t.children(".back > div").text(e)):(t.data("face","front"),t.children(".front > div").text(e)),Y(t.not(".flipcard > *"),i)}function z(){k(Pt,!0),setTimeout(function(){j($(".preview"),"["+Pt[0]+" preview]")},50),j($(".modeselector"),Pt[0])}function W(){k(Pt),setTimeout(function(){j($(".preview"),"["+Pt[0]+" preview]",!0)},50),j($(".modeselector"),Pt[0],!0)}function D(t){var e=t.split("-")[0],i=t.split("-")[1];return $("#"+e+"-"+i)}function X(t,e,i,o){for(;e+1>=t;t++)o=o.add(D(i+"-"+t));return o}function H(t,e){for(var i=$(""),o=Number(t.split("-")[0]),r=Number(t.split("-")[1]),s=Number(e.split("-")[0]),l=Number(e.split("-")[1])-1;s>=o;o++)i=X(r,l,o,i);return i}function R(t,e,i){return H(t,e).wrapAll('<div class="'+i+'"/>'),$("."+i)}function Y(t,e,i){t.css("z-index",_()),void 0===t.data("rotation")&&t.data("rotation",0);var o,r=t.data("rotation");return e?(o=180*Number(r)-180,r--):(o=180*Number(r)+180,r++),t.transition({perspective:"800px",rotateY:o+"deg"}),t.data("rotation",r),void 0!==i&&i(t,i),t}function F(){for(var t="",e="abcdefghijklmnopqrstuvwxyz",i=0;5>i;i++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}function G(t,e,i){return t.children(".cell").each(function(){$(this).css("top",Number($(this).css("top").split("px")[0])-e+"px"),$(this).css("left",Number($(this).css("left").split("px")[0])-i+"px")}),t}function q(t,e,i){return t.css({top:Number($(t).css("top").split("px")[0])-e+"px",left:Number($(t).css("left").split("px")[0])-i+"px"}),t}function O(t,e,i,o){var r=b(t,e,i),s=$(r.children(".front")),l=v(t);return o.forEach(function(t){q($(t),Number(l[0]-1)*pt,Number(l[1]-1)*pt),s=s.append($(t))}),s.appendTo($("."+i+".front")),r}var L=jsfxlib.createWave(["sine",0,.4,0,.092,0,.208,20,286,2400,-.674,0,0,.01,3e-4,0,0,0,0,0,0,0,0,1,0,0,.048,0]),I=[jsfxlib.createWave(["square",0,.4,0,.028,0,.118,20,525,2400,-.658,0,0,.01,3e-4,0,0,0,.2415,0,0,0,0,1,0,0,.227,0]),jsfxlib.createWave(["square",0,.4,0,.062,0,.284,20,762,2400,-.374,0,0,.01,3e-4,0,0,0,.5,0,0,0,0,1,0,0,.017,0])],K=[jsfxlib.createWave(["square",0,.4,.672,1.424,.351,1.526,636,2166,1208,-.268,.08,.132,35.9545,.6126,-.024,-.948,.757,.0435,.586,.3992,-.974,-.434,.802,-.156,.526,.792,.572]),jsfxlib.createWave(["square",0,.4,.242,1.174,2.097,.946,1529,139,1995,-.206,.884,.769,3.7532,.6438,-.966,-.786,.419,.383,.482,.1912,-.904,-.082,.624,-.568,.015,.345,.26]),jsfxlib.createWave(["synth",0,.4,.082,1.742,2.637,.658,1661,2057,69,.886,.402,.188,17.6703,.9337,.38,-.09,.222,.1315,-.774,.1648,-.16,-.408,.439,-.358,.884,.906,-.1])],V=jsfxlib.createWave(["sine",0,.4,0,.244,.048,.116,20,507,2400,-.728,0,0,.01,3e-4,0,0,0,.495,.032,0,0,0,1,0,0,0,0]);Actor=function(t,e){this.color=t,"undefined"==typeof e?this.block=Math.floor(wt/2)+"-"+Math.floor(wt/2):this.block=e,this._c=0,this.enemiesKilled=0,this.markedArea=0},Actor.prototype={init:function(){this._c=et.getCell(this.block),et.cell[this._c].setColor(this.color),et.cell[this._c].setCellType("Actor")},move:function(t){if("SkipSmash"!==J)switch(t){case"up":this.makeMove(t,this._c-wt);break;case"down":this.makeMove(t,this._c+wt);break;case"left":this.makeMove(t,this._c-1);break;case"right":this.makeMove(t,this._c+1)}else switch(t){case"up":this.thrustEnemy(t,this._c-wt);break;case"down":this.thrustEnemy(t,this._c+wt);break;case"left":this.thrustEnemy(t,this._c-1);break;case"right":this.thrustEnemy(t,this._c+1)}},makeMove:function(t,e){if(et.cell[this._c].checkCell(t,this._c)){if("Enemy"===et.cell[e].type)for(var i=0;i<rt.length;i++)if(rt[i]._c===e){0!=rt.length&&Ct.soundsOn&&I[n(0,I.length)].play(),rt.splice(i,1),st.splice(i,1);break}et.cell[this._c].setCellType("Normal"),"PaintStack"!==J?(et.cell[this._c].setColor(et.c2),this._c=e,et.cell[this._c].setColor(this.color),et.cell[this._c].setCellType("Actor")):(et.cell[this._c].isMarked?et.cell[this._c].setColor(et.cell[this._c].genColor):et.cell[this._c].setColor(et.c2),this._c=e,et.cell[this._c].isMarked||(this.markedArea+=1/(wt*xt)*100,et.cell[this._c].genColor=tt.genetaHSLColor_Angle([{minAngle:320,maxAngle:359},{minAngle:0,maxAngle:40},{minAngle:70,maxAngle:160}]),et.cell[this._c].isMarked=!0),et.cell[this._c].setColor(this.color),et.cell[this._c].setCellType("Actor"))}},thrustEnemy:function(t,e){if(et.cell[this._c].checkCell(t,this._c))if("Enemy"===et.cell[e].type){for(var i=0;i<rt.length;i++)if(rt[i]._c===e){0!=rt.length&&Ct.soundsOn&&V.play(),rt[i].Thrust(t);break}et.cell[e].checkCell(t,e)&&(et.cell[this._c].setCellType("Normal"),et.cell[this._c].setColor(et.c2),this._c=e,et.cell[this._c].setColor(this.color),et.cell[this._c].setCellType("Actor"))}else et.cell[this._c].setCellType("Normal"),et.cell[this._c].setColor(et.c2),this._c=e,et.cell[this._c].setColor(this.color),et.cell[this._c].setCellType("Actor")}},Actor.prototype.constructor=Actor,Cell=function(t,e,i,o){this.color=o,this.positionX=t,this.positionY=e,this.HashId=i,this.rect,this.init(),this.type="Normal",this.isMarked=!1,this.isFilterEnabled=!1,this.genColor="#000"},Cell.prototype={init:function(){this.rect=new Phaser.Rectangle(this.positionX,this.positionY,et.cellWidth,et.cellWidth)},setCellType:function(t){"Normal"!=t&&"Enemy"!=t&&"Actor"!=t&&alert('type can only be "Enemy","Normal","Actor"'),this.type=t},render:function(){this.isFilterEnabled===!1&&at.debug.geom(this.rect,this.color)},setColor:function(t){this.color=t},EnableFilter:function(){this.isFilterEnabled=!0,this.rect=at.add.sprite(this.positionX,this.positionY),this.rect.width=Q,this.rect.height=Z,this.rect.filters=[U]},checkCell:function(t,e){var i,o=!0;switch(t){case"up":o=wt>e?!1:!0;break;case"down":o=e>wt*et.cellsCountY-wt?!1:!0;break;case"left":for(i=0;wt>i;i++)e===wt*i&&(o=!1);if(o===!1)break;o=!0;break;case"right":for(i=0;wt>i;i++)e===wt*i-1&&(o=!1);if(o===!1)break;o=!0}return o}},Cell.prototype.constructor=Cell,Color=function(){this.Color_OceanBlue=10092543,this.Color_SteelBlue=4620980,this.Color_RoyalBlue=4286945,this.Color_Aquamarine=8388564,this.Color_Blue=255,this.Color_BlueViolet=9055202,this.Color_CadetBlue=6266528,this.Color_CornflowerBlue=6591981,this.Color_Cyan=65535,this.Color_DarkBlue=139,this.Color_DarkCyan=35723,this.Color_DodgerBlue=2003199,this.Color_DeepSkyBlue=49151,this.Color_LightSteelBlue=11584734,this.Color_Navy=128,this.Color_PowderBlue=11591910,this.Color_Turquoise=4251856,this.Color_Black=0,this.Color_Violet=15631086,this.Color_Yellow=16776960,this.Color_Tomato=16737095,this.Color_PaleVioletRed=14381203,this.Color_Red=16711680,this.Color_Wheat=16113331,this.Color_AntiqueWhite=16444375,this.Color_White=16777215},Color.prototype={generateHexColor:function(){return"#"+(16777215*(.5+.5*Math.random())<<0).toString(16)},genetaRGBAColor:function(){return"rgba("+n(0,256)+","+n(0,256)+","+n(0,256)+","+Math.random()+")"},genetaRGBColor_max:function(t,e,i){for(var o=[n(0,256),n(0,256),n(0,256)];o[0]>t;)o[0]/=2;for(;o[1]>t;)o[1]/=2;for(;o[2]>t;)o[2]/=2;return"rgba("+Math.round(o[0])+","+Math.round(o[1])+","+Math.round(o[2])+", 1)"},genetaRGBColor:function(){return"rgba("+n(0,256)+","+n(0,256)+","+n(0,256)+", 1)"},genetaHSLColor:function(){return"hsl("+n(0,360)+",30%,30%)"},genetaHSLColor_Angle:function(t){for(var e=0,i=n(0,360);e<t.length;)i>=t[e].minAngle&&i<=t[e].maxAngle&&(i=n(0,360),e=-1),e++;return"hsl("+i+","+n(30,61)+"%,30%)"},genetaHSLAColor:function(){return"hsl("+n(0,360)+",30%,30%,"+Math.random()+")"}},Color.prototype.constructor=Color,Enemy=function(t,e){this.color=t,"undefined"==typeof e?alert('Error : "blockID" is undefined'):this.block=e,this.isDead=!1,this._c=0,et.cell[et.getCell(this.block)].type="Enemy"},Enemy.prototype={init:function(){this._c=et.getCell(this.block),et.cell[this._c].setColor(this.color),et.cell[this._c].setCellType("Enemy")},move:function(t){switch(t){case"up":et.cell[this._c].checkCell(t,this._c)&&"Enemy"!==et.cell[this._c-wt].type&&(et.cell[this._c].setCellType("Normal"),et.cell[this._c].setColor(et.c2),this._c=this._c-wt,"PaintStack"===J&&et.cell[this._c].isMarked&&(it.markedArea-=1/(wt*xt)*100,et.cell[this._c].isMarked=!1),et.cell[this._c].setColor(this.color),et.cell[this._c].setCellType("Enemy"));break;case"down":et.cell[this._c].checkCell(t,this._c)&&"Enemy"!==et.cell[this._c+wt].type&&(et.cell[this._c].setCellType("Normal"),et.cell[this._c].setColor(et.c2),this._c=this._c+wt,"PaintStack"===J&&et.cell[this._c].isMarked&&(it.markedArea-=1/(wt*xt)*100,et.cell[this._c].isMarked=!1),et.cell[this._c].setColor(this.color),et.cell[this._c].setCellType("Enemy"));break;case"left":et.cell[this._c].checkCell(t,this._c)&&"Enemy"!==et.cell[this._c-1].type&&(et.cell[this._c].setCellType("Normal"),et.cell[this._c].setColor(et.c2),this._c=this._c-1,"PaintStack"===J&&et.cell[this._c].isMarked&&(it.markedArea-=1/(wt*xt)*100,et.cell[this._c].isMarked=!1),et.cell[this._c].setColor(this.color),et.cell[this._c].setCellType("Enemy"));break;case"right":et.cell[this._c].checkCell(t,this._c)&&"Enemy"!==et.cell[this._c+1].type&&(et.cell[this._c].setCellType("Normal"),et.cell[this._c].setColor(et.c2),this._c=this._c+1,"PaintStack"===J&&et.cell[this._c].isMarked&&(it.markedArea-=1/(wt*xt)*100,et.cell[this._c].isMarked=!1),et.cell[this._c].setColor(this.color),et.cell[this._c].setCellType("Enemy"))}},Nextmove:function(){var t=it._c-this._c,e=Math.round(et.getRow(it._c)-et.getRow(this._c)),i=Math.round(et.getColumn(it._c)-et.getColumn(this._c));return 0===t?s():e>0&&$t[0]()===!0?"down":0>e&&$t[0]()===!0?"up":i>0?"right":"left"},Thrust:function(t){var e,i,o;switch(t){case"up":for(e=this._c-wt,i=0;wt>i&&(e=this._c-wt,et.cell[this._c].checkCell(t,this._c));i++){if("Enemy"===et.cell[e].type)for(o=0;o<rt.length;o++)if(rt[o]._c===e){et.cell[e].type="Normal",rt.splice(o,1),st.splice(o,1);break}this.move(t)}break;case"down":for(e=this._c+wt,i=0;wt>i&&(e=this._c+wt,et.cell[this._c].checkCell(t,this._c));i++){if("Enemy"===et.cell[e].type)for(o=0;o<rt.length;o++)if(rt[o]._c===e){et.cell[e].type="Normal",rt.splice(o,1),st.splice(o,1);break}this.move(t)}break;case"left":for(e=this._c-1,i=0;wt>i&&(e=this._c-1,et.cell[this._c].checkCell(t,this._c));i++){if("Enemy"===et.cell[e].type)for(o=0;o<rt.length;o++)if(rt[o]._c===e){et.cell[e].type="Normal",rt.splice(o,1),st.splice(o,1);break}this.move(t)}break;case"right":for(e=this._c+1,i=0;wt>i&&(e=this._c+1,et.cell[this._c].checkCell(t,this._c));i++){if("Enemy"===et.cell[e].type)for(o=0;o<rt.length;o++)if(rt[o]._c===e){et.cell[e].type="Normal",rt.splice(o,1),st.splice(o,1);break}this.move(t)}}}},Enemy.prototype.constructor=Enemy,Grid=function(t,e,i,o,r,s,l){this.c=r,this.c2=s,"undefined"==typeof l?this.borderThickness=2:this.borderThickness=l,this.cellsCountX=t,this.cellsCountY=e,this.cellWidth=i,this.cellHeight=o,this.grid,this.cell=[]},Grid.prototype={init:function(){var t=this.cellsCountX*this.cellWidth+this.borderThickness*this.cellsCountX+this.borderThickness,e=this.cellsCountY*this.cellHeight+this.borderThickness*this.cellsCountY+this.borderThickness;this.grid=new Phaser.Rectangle((ut-t)/2,(ft-e)/2,t,e),e=(ft-e)/2,t=(ut-t)/2;for(var i=0;i<this.cellsCountY;i++)for(var o=0;o<this.cellsCountX;o++){var r=t+this.borderThickness*(o+1)+this.cellWidth*o,s=e+this.borderThickness*(i+1)+this.cellHeight*i;this.cell.push(new Cell(r,s,o.toString()+"-"+i.toString(),this.c2))}},getCell:function(t){for(var e=0;e<this.cell.length;e++)if(this.cell[e].HashId==t)return e;return console.log("Couldn't find the cell with id = "+t),-1},render:function(){for(var t=0;t<this.cell.length;t++)this.cell[t].render()},getRow:function(t){for(var e=this.cellsCountX,i=0;i<this.cellsCountX;i++){if(e>t)return i;e+=this.cellsCountX}console.error("Something went terribly wrong! \n Couldn't find the row of a cell.")},getColumn:function(t){for(var e=0;e<this.cellsCountX;e++)for(var i=0;i<this.cellsCountX;i++)if(t===e+i*this.cellsCountX)return e;console.error("Something went terribly wrong! \n Couldn't find the column of a cell.")}},Grid.prototype.constructor=Grid;var U,J,Q,Z,tt,et,it,ot,rt,st,lt,nt,ct,at,ht,dt,ut,ft,pt,bt,mt,gt=!1,Ct=Ct||{version:"0.0.1",soundsOn:!0,TotalScore:[0,0,0,0],CurrentScore:0,isPaused:!0,isCountdownEnabled:!0},_t=!1,kt=1e3,vt=0,yt=0,wt=7,xt=7,St="#b50000",Tt=0,Mt=!0,Nt=!1,At=0,$t=[function(){return Math.random()<.5},function(){return!(Math.random()+.5|0)},function(){return!(+new Date%2)}],Et=0,Pt=["Normal","Endless","SkipSmash","PaintStack"];$(document).ready(function(){d(),c("1-1","13-7"),T(),$("#using_builder").length<=0&&(console.log("Loading Scripts"),C("src/Math.js"),C("src/Cell.js"),C("src/Swipe.js"),C("src/Actor.js"),C("src/Enemy.js"),C("src/Assets/Tunes.js"),C("src/Assets/Shaders.js"),C("src/Grid.js"),C("src/Color.js"),C("src/index.js"),console.log("Loaded Scripts")),E()});var Bt}();
//# sourceMappingURL=skipstack.min.js.map
